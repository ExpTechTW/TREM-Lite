appId: com.exptech.trem-lite
productName: TREM-Lite
copyright: Copyright Â© 2026 ExpTech Studio
artifactName: ${productName}-${version}-${os}-${arch}.${ext}

directories:
  output: dist

extraMetadata:
  main: ./src/main.js

compression: maximum
asar: true
asarUnpack:
  - "**/*.mp3"

files:
  - "**/*"
  # Source maps & dev files
  - "!**/*.{map,ts,md,txt}"
  - "!**/{LICENSE,CHANGELOG,README}*"
  - "!**/.{eslint,prettier}*"
  - "!**/tsconfig.json"
  # node_modules cleanup
  - "!node_modules/**/{test,tests,__tests__,docs,doc,example,examples,demo,.github}/**"
  - "!node_modules/**/src/**"
  # maplibre-gl
  - "!node_modules/maplibre-gl/dist/*-dev.js*"
  # moment (unused locales)
  - "!node_modules/moment/{locale,min/locales*,min/moment-with-locales*}/**"

afterPack: scripts/afterPack.js

win:
  appId: tw.exptech.trem_lite
  icon: ./src/TREM.ico
  verifyUpdateCodeSignature: false
  protocols:
    - name: TREM Lite Protocol
      schemes: [trem-lite]
  target:
    - target: nsis
      arch: [x64, ia32]

nsis:
  perMachine: false
  allowToChangeInstallationDirectory: false
  deleteAppDataOnUninstall: false

mac:
  icon: ./src/TREM.png
  category: public.app-category.productivity
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: assets/entitlements.mac.plist
  entitlementsInherit: assets/entitlements.mac.plist
  protocols:
    - name: TREM Lite Protocol
      schemes: [trem-lite]
  target:
    - target: dmg
      arch: [x64, arm64]
    - target: zip
      arch: [x64, arm64]

linux:
  icon: ./src/TREM.png
  category: Development
  protocols:
    - name: TREM Lite Protocol
      schemes: [trem-lite]
  target:
    - target: AppImage
      arch: [x64, arm64]
